"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[558],{8558:function(e,s,t){t.r(s),t.d(s,{default:function(){return H}});var a=t(6252),n=t(9963),o=t(3577);const l=e=>((0,a.dD)("data-v-614825d3"),e=e(),(0,a.Cn)(),e),r={class:"header"},u={class:"form"},i=l((()=>(0,a._)("h1",null,"Atech acadmey",-1))),d={class:"input"},c=l((()=>(0,a._)("label",{for:"email"}," email:",-1))),p=l((()=>(0,a._)("button",{type:"submit"},"submit",-1))),m=l((()=>(0,a._)("h1",null,"Atech acadmey",-1))),w={class:"input"},f=l((()=>(0,a._)("label",{for:"password"},"token:",-1))),_=l((()=>(0,a._)("p",null," A token has been sent to your email with the token. check your spam if you can't find it ",-1))),k=l((()=>(0,a._)("button",{type:"submit"},"submit",-1))),h=l((()=>(0,a._)("a",{href:"/forget_password",class:"a"},"back",-1))),g=l((()=>(0,a._)("h1",null,"Atech acadmey",-1))),y={class:"input"},v=l((()=>(0,a._)("label",{for:"userEmail"},"email:",-1))),b={class:"input"},T=l((()=>(0,a._)("label",{for:"password"},"new Password:",-1))),E=l((()=>(0,a._)("button",{type:"submit"},"submit",-1))),q=l((()=>(0,a._)("footer",null,[(0,a._)("i",{class:"fa-solid fa-copyright"}),(0,a.Uk)("Atechacadmey2022")],-1))),P={class:"response-div"},D={key:0,class:"done"},x=l((()=>(0,a._)("i",{class:"fa-solid fa-circle-check"},null,-1))),A={key:1,class:"error"},I=l((()=>(0,a._)("i",{class:"fa-solid fa-circle-exclamation"},null,-1)));function S(e,s,t,l,S,U){const C=(0,a.up)("Header");return(0,a.wg)(),(0,a.iD)("main",null,[(0,a._)("div",r,[(0,a.Wm)(C)]),(0,a._)("div",u,[l.user.step1?((0,a.wg)(),(0,a.iD)("form",{key:0,onSubmit:s[1]||(s[1]=(0,n.iM)((e=>l.updatePassword()),["prevent"]))},[i,(0,a._)("div",d,[c,(0,a.wy)((0,a._)("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=e=>l.user.email=e),placeholder:"Enter your email...",required:""},null,512),[[n.nr,l.user.email]])]),p],32)):(0,a.kq)("",!0),l.user.step2?((0,a.wg)(),(0,a.iD)("form",{key:1,onSubmit:s[3]||(s[3]=(0,n.iM)((e=>l.verifyToken()),["prevent"]))},[m,(0,a._)("span",null,(0,o.zw)(l.user.count),1),(0,a._)("div",w,[f,(0,a.wy)((0,a._)("input",{type:"text",name:"newPassword",id:"newPassword","onUpdate:modelValue":s[2]||(s[2]=e=>l.user.token=e),placeholder:"Enter token sent to your email...",required:""},null,512),[[n.nr,l.user.token]])]),_,k,h],32)):(0,a.kq)("",!0),l.user.step3?((0,a.wg)(),(0,a.iD)("form",{key:2,onSubmit:s[6]||(s[6]=(0,n.iM)((e=>l.changePassword()),["prevent"]))},[g,(0,a._)("div",y,[v,(0,a.wy)((0,a._)("input",{type:"email",name:"userEmail",id:"userEmail","onUpdate:modelValue":s[4]||(s[4]=e=>l.user.userEmail=e),placeholder:"Enter email..",required:""},null,512),[[n.nr,l.user.userEmail]])]),(0,a._)("div",b,[T,(0,a.wy)((0,a._)("input",{type:"password",name:"newPassword",id:"newPassword","onUpdate:modelValue":s[5]||(s[5]=e=>l.user.new_password=e),placeholder:"Enter new Password...",required:""},null,512),[[n.nr,l.user.new_password]])]),E],32)):(0,a.kq)("",!0),q]),(0,a._)("div",P,[l.user.success?((0,a.wg)(),(0,a.iD)("div",D,[x,(0,a._)("span",null,(0,o.zw)(l.user.msg),1)])):(0,a.kq)("",!0),l.user.failed?((0,a.wg)(),(0,a.iD)("div",A,[I,(0,a._)("span",null,(0,o.zw)(l.user.msg),1)])):(0,a.kq)("",!0)])])}var U=t(9669),C=t.n(U),V=t(2119),z=t(2262),K=t(3920),M={name:"Forget_password",components:{Header:K.Z},setup(){let e=(0,z.qj)({email:"",token:"",new_password:"",userEmail:"",count:1,msg:"",step1:!0,step2:!1,step3:!1,success:!1,failed:!1});const s=(0,V.tv)();let t={headers:{"Content-Type":"application/json"}};function a(){C().post("api/forget_password",{email:e.email},t).then((s=>{console.log(s),"OK"===s.statusText&&(localStorage.setItem("updateToken",s.data.updateToken),e.step1=!1,e.step2=!0,l())})).catch((s=>{e.failed=!0,setTimeout(u,3e3)}))}function n(){C().post("api/forget_password/token",{token:e.token,userToken:localStorage.getItem("updateToken")},t).then((s=>{"OK"===s.statusText&&(e.step2=!1,e.step3=!0)})).catch((s=>{e.failed=!0,e.msg=s.response.data.msg,setTimeout(u,3e3)}))}function o(){C().post("api/forget_password/update",{password:e.new_password,email:e.userEmail},t).then((s=>{console.log(s),"OK"===s.statusText&&(e.success=!0,e.msg=s.data.msg,setTimeout(r,3e3))})).catch((s=>{e.failed=!0,e.msg=s.response.data.msg,setTimeout(u,3e3)}))}function l(){let s=setInterval((()=>{e.count+=1,60===e.count&&clearInterval(s)}),1e3)}function r(){e.success=!1,s.push("/login")}function u(){e.failed=!1}return{user:e,updatePassword:a,verifyToken:n,changePassword:o}}},O=t(3744);const j=(0,O.Z)(M,[["render",S],["__scopeId","data-v-614825d3"]]);var H=j}}]);
//# sourceMappingURL=558.0d4d2a8c.js.map