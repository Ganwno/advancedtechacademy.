"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[249],{3249:function(e,s,t){t.r(s),t.d(s,{default:function(){return H}});var a=t(6252),n=t(9963),o=t(3577);const r=e=>((0,a.dD)("data-v-42ea6b2d"),e=e(),(0,a.Cn)(),e),l={class:"header"},u={class:"form"},i=r((()=>(0,a._)("h1",null,"Atech acadmey",-1))),d={class:"input"},c=r((()=>(0,a._)("label",{for:"email"}," email:",-1))),p=r((()=>(0,a._)("button",{type:"submit"},"submit",-1))),m=r((()=>(0,a._)("h1",null,"Atech acadmey",-1))),w={class:"input"},f=r((()=>(0,a._)("label",{for:"password"},"token:",-1))),_=r((()=>(0,a._)("p",null," A token has been sent to your email with the token. check your spam if you can't find it ",-1))),k=r((()=>(0,a._)("button",{type:"submit"},"submit",-1))),h=r((()=>(0,a._)("a",{href:"/forget_password",class:"a"},"back",-1))),y=r((()=>(0,a._)("h1",null,"Atech acadmey",-1))),g={class:"input"},v=r((()=>(0,a._)("label",{for:"userEmail"},"email:",-1))),b={class:"input"},T=r((()=>(0,a._)("label",{for:"password"},"new Password:",-1))),E=r((()=>(0,a._)("button",{type:"submit"},"submit",-1))),q=r((()=>(0,a._)("footer",null,[(0,a._)("i",{class:"fa-solid fa-copyright"}),(0,a.Uk)("Atechacadmey2022")],-1))),P={class:"response-div"},D={key:0,class:"done"},x=r((()=>(0,a._)("i",{class:"fa-solid fa-circle-check"},null,-1))),A={key:1,class:"error"},I=r((()=>(0,a._)("i",{class:"fa-solid fa-circle-exclamation"},null,-1)));function S(e,s,t,r,S,U){const C=(0,a.up)("Header");return(0,a.wg)(),(0,a.iD)("main",null,[(0,a._)("div",l,[(0,a.Wm)(C)]),(0,a._)("div",u,[r.user.step1?((0,a.wg)(),(0,a.iD)("form",{key:0,onSubmit:s[1]||(s[1]=(0,n.iM)((e=>r.updatePassword()),["prevent"]))},[i,(0,a._)("div",d,[c,(0,a.wy)((0,a._)("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=e=>r.user.email=e),placeholder:"Enter your email...",required:""},null,512),[[n.nr,r.user.email]])]),p],32)):(0,a.kq)("",!0),r.user.step2?((0,a.wg)(),(0,a.iD)("form",{key:1,onSubmit:s[3]||(s[3]=(0,n.iM)((e=>r.verifyToken()),["prevent"]))},[m,(0,a._)("span",null,(0,o.zw)(r.user.count),1),(0,a._)("div",w,[f,(0,a.wy)((0,a._)("input",{type:"text",name:"newPassword",id:"newPassword","onUpdate:modelValue":s[2]||(s[2]=e=>r.user.token=e),placeholder:"Enter token sent to your email...",required:""},null,512),[[n.nr,r.user.token]])]),_,k,h],32)):(0,a.kq)("",!0),r.user.step3?((0,a.wg)(),(0,a.iD)("form",{key:2,onSubmit:s[6]||(s[6]=(0,n.iM)((e=>r.changePassword()),["prevent"]))},[y,(0,a._)("div",g,[v,(0,a.wy)((0,a._)("input",{type:"email",name:"userEmail",id:"userEmail","onUpdate:modelValue":s[4]||(s[4]=e=>r.user.userEmail=e),placeholder:"Enter email..",required:""},null,512),[[n.nr,r.user.userEmail]])]),(0,a._)("div",b,[T,(0,a.wy)((0,a._)("input",{type:"password",name:"newPassword",id:"newPassword","onUpdate:modelValue":s[5]||(s[5]=e=>r.user.new_password=e),placeholder:"Enter new Password...",required:""},null,512),[[n.nr,r.user.new_password]])]),E],32)):(0,a.kq)("",!0),q]),(0,a._)("div",P,[r.user.success?((0,a.wg)(),(0,a.iD)("div",D,[x,(0,a._)("span",null,(0,o.zw)(r.user.msg),1)])):(0,a.kq)("",!0),r.user.failed?((0,a.wg)(),(0,a.iD)("div",A,[I,(0,a._)("span",null,(0,o.zw)(r.user.msg),1)])):(0,a.kq)("",!0)])])}var U=t(9669),C=t.n(U),V=t(2119),z=t(2262),K=t(5751),M={name:"Forget_password",components:{Header:K.Z},setup(){let e=(0,z.qj)({email:"",token:"",new_password:"",userEmail:"",count:1,msg:"",step1:!0,step2:!1,step3:!1,success:!1,failed:!1});const s=(0,V.tv)();let t={headers:{"Content-Type":"application/json"}};function a(){C().post("api/forget_password",{email:e.email},t).then((s=>{"OK"===s.statusText&&(localStorage.setItem("updateToken",s.data.updateToken),e.step1=!1,e.step2=!0,r())})).catch((s=>{e.failed=!0,setTimeout(u,3e3)}))}function n(){C().post("api/forget_password/token",{token:e.token,userToken:localStorage.getItem("updateToken")},t).then((s=>{"OK"===s.statusText&&(e.step2=!1,e.step3=!0)})).catch((s=>{e.failed=!0,e.msg=s.response.data.msg,setTimeout(u,3e3)}))}function o(){C().post("api/forget_password/update",{password:e.new_password,email:e.userEmail},t).then((s=>{"OK"===s.statusText&&(e.success=!0,e.msg=s.data.msg,setTimeout(l,3e3))})).catch((s=>{e.failed=!0,e.msg=s.response.data.msg,setTimeout(u,3e3)}))}function r(){let s=setInterval((()=>{e.count+=1,60===e.count&&clearInterval(s)}),1e3)}function l(){e.success=!1,s.push("/login")}function u(){e.failed=!1}return{user:e,updatePassword:a,verifyToken:n,changePassword:o}}},O=t(3744);const j=(0,O.Z)(M,[["render",S],["__scopeId","data-v-42ea6b2d"]]);var H=j}}]);
//# sourceMappingURL=249.fcad37bc.js.map