{"version":3,"file":"js/558.0d4d2a8c.js","mappings":"yPAESA,MAAM,U,GAINA,MAAM,Q,UAEP,OAAsB,UAAlB,iBAAa,K,GACZA,MAAM,S,UACT,OAAkC,SAA3BC,IAAI,SAAQ,WAAO,K,UAU5B,OAAqC,UAA7BC,KAAK,UAAS,UAAM,K,UAG5B,OAAsB,UAAlB,iBAAa,K,GAEZF,MAAM,S,UACT,OAAoC,SAA7BC,IAAI,YAAW,UAAM,K,UAU9B,OAGI,SAHD,8FAGH,K,UACA,OAAqC,UAA7BC,KAAK,UAAS,UAAM,K,UAC5B,OAA6C,KAA1CC,KAAK,mBAAmBH,MAAM,KAAI,QAAI,K,UAGzC,OAAsB,UAAlB,iBAAa,K,GACZA,MAAM,S,UACT,OAAqC,SAA9BC,IAAI,aAAY,UAAM,K,GAU1BD,MAAM,S,UACT,OAA2C,SAApCC,IAAI,YAAW,iBAAa,K,UAUrC,OAAqC,UAA7BC,KAAK,UAAS,UAAM,K,UAE9B,OAAsE,gBAA9D,OAAqC,KAAlCF,MAAM,2B,QAA4B,sB,QAE1CA,MAAM,gB,SACJA,MAAM,Q,UACT,OAAwC,KAArCA,MAAM,4BAA0B,W,SAGhCA,MAAM,S,UACT,OAA8C,KAA3CA,MAAM,kCAAgC,W,qEA5E/C,QAgFO,cA/EL,OAEM,MAFN,EAEM,EADJ,QAAU,MAGZ,OAgEM,MAhEN,EAgEM,CA/D2C,EAAAI,KAAU,Q,WAAzD,QAcO,Q,MAdA,SAAM,yBAAU,EAAAC,kBAAc,e,CACnC,GACA,OAUM,MAVN,EAUM,CATJ,G,SACA,OAOE,SANAH,KAAK,QACLI,KAAK,QACLC,GAAG,Q,qCACM,EAAAH,KAAU,SACnBI,YAAY,sBACZC,SAAA,I,iBAFS,EAAAL,KAAKM,WAKlB,G,qBAE0C,EAAAN,KAAU,Q,WAAtD,QAoBO,Q,MApBA,SAAM,yBAAU,EAAAO,eAAW,e,CAChC,GACA,OAA6B,qBAApB,EAAAP,KAAKQ,OAAK,IACnB,OAUM,MAVN,EAUM,CATJ,G,SACA,OAOE,SANAV,KAAK,OACLI,KAAK,cACLC,GAAG,c,qCACM,EAAAH,KAAU,SACnBI,YAAY,oCACZC,SAAA,I,iBAFS,EAAAL,KAAKS,WAKlB,EAIA,EACA,G,qBAE6C,EAAAT,KAAU,Q,WAAzD,QAyBO,Q,MAzBA,SAAM,yBAAU,EAAAU,kBAAc,e,CACnC,GACA,OAUM,MAVN,EAUM,CATJ,G,SACA,OAOE,SANAZ,KAAK,QACLI,KAAK,YACLC,GAAG,Y,qCACM,EAAAH,KAAc,aACvBI,YAAY,gBACZC,SAAA,I,iBAFS,EAAAL,KAAKW,gBAKlB,OAUM,MAVN,EAUM,CATJ,G,SACA,OAOE,SANAb,KAAK,WACLI,KAAK,cACLC,GAAG,c,qCACM,EAAAH,KAAiB,gBAC1BI,YAAY,wBACZC,SAAA,I,iBAFS,EAAAL,KAAKY,kBAKlB,G,qBAEF,KAEF,OASM,MATN,EASM,CARoB,EAAAZ,KAAY,U,WAApC,QAGM,MAHN,EAGM,CAFJ,GACA,OAA2B,qBAAlB,EAAAA,KAAKa,KAAG,O,eAEM,EAAAb,KAAW,S,WAApC,QAGM,MAHN,EAGM,CAFJ,GACA,OAA2B,qBAAlB,EAAAA,KAAKa,KAAG,O,wEAUzB,GACEX,KAAM,kBACNY,WAAY,CACVC,OAAM,KAERC,QACE,IAAIhB,GAAO,QAAS,CAClBM,MAAO,GACPG,MAAO,GACPG,aAAc,GACdD,UAAW,GACXH,MAAO,EACPK,IAAK,GACLI,OAAO,EACPC,OAAO,EACPC,OAAO,EACPC,SAAS,EACTC,QAAQ,IAGV,MAAMC,GAAS,UAEf,IAAIC,EAAS,CACXC,QAAS,CACP,eAAgB,qBAIpB,SAASvB,IACP,SACQ,sBAAuB,CAAEK,MAAON,EAAKM,OAASiB,GACnDE,MAAMC,IACLC,QAAQC,IAAIF,GACW,OAAnBA,EAAIG,aACNC,aAAaC,QAAQ,cAAeL,EAAIM,KAAKC,aAC7CjC,EAAKiB,OAAQ,EACbjB,EAAKkB,OAAQ,EACbgB,QAGHC,OAAOC,IACNpC,EAAKqB,QAAS,EACdgB,WAAWC,EAAY,QAI7B,SAAS/B,IACP,SAEI,4BACA,CAAEE,MAAOT,EAAKS,MAAO8B,UAAWT,aAAaU,QAAQ,gBACrDjB,GAEDE,MAAMC,IACkB,OAAnBA,EAAIG,aACN7B,EAAKkB,OAAQ,EACblB,EAAKmB,OAAQ,MAGhBgB,OAAOC,IACNpC,EAAKqB,QAAS,EACdrB,EAAKa,IAAMuB,EAAIK,SAAST,KAAKnB,IAC7BwB,WAAWC,EAAY,QAI7B,SAAS5B,IACP,SAEI,6BACA,CACEgC,SAAU1C,EAAKY,aACfN,MAAON,EAAKW,WAEdY,GAEDE,MAAMC,IACLC,QAAQC,IAAIF,GACW,OAAnBA,EAAIG,aACN7B,EAAKoB,SAAU,EACfpB,EAAKa,IAAMa,EAAIM,KAAKnB,IACpBwB,WAAWM,EAAK,SAGnBR,OAAOC,IACNpC,EAAKqB,QAAS,EACdrB,EAAKa,IAAMuB,EAAIK,SAAST,KAAKnB,IAC7BwB,WAAWC,EAAY,QAI7B,SAASJ,IACP,IAAIU,EAAWC,aAAY,KACzB7C,EAAKQ,OAAS,EAEK,KAAfR,EAAKQ,OACPsC,cAAcF,KAEf,KAGL,SAASD,IACP3C,EAAKoB,SAAU,EAEfE,EAAOyB,KAAK,UAGd,SAAST,IACPtC,EAAKqB,QAAS,EAGhB,MAAO,CAAErB,KAAAA,EAAMC,eAAAA,EAAgBM,YAAAA,EAAaG,eAAAA,K,UChMhD,MAAMsC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF","sources":["webpack://client/./src/components/forget_password.vue","webpack://client/./src/components/forget_password.vue?ca42"],"sourcesContent":["<template>\r\n  <main>\r\n    <div class=\"header\">\r\n      <Header />\r\n    </div>\r\n\r\n    <div class=\"form\">\r\n      <form @submit.prevent=\"updatePassword()\" v-if=\"user.step1\">\r\n        <h1>Atech acadmey</h1>\r\n        <div class=\"input\">\r\n          <label for=\"email\"> email:</label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            v-model=\"user.email\"\r\n            placeholder=\"Enter your email...\"\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\">submit</button>\r\n      </form>\r\n      <form @submit.prevent=\"verifyToken()\" v-if=\"user.step2\">\r\n        <h1>Atech acadmey</h1>\r\n        <span>{{ user.count }}</span>\r\n        <div class=\"input\">\r\n          <label for=\"password\">token:</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"newPassword\"\r\n            id=\"newPassword\"\r\n            v-model=\"user.token\"\r\n            placeholder=\"Enter token sent to your email...\"\r\n            required\r\n          />\r\n        </div>\r\n        <p>\r\n          A token has been sent to your email with the token. check your spam if\r\n          you can't find it\r\n        </p>\r\n        <button type=\"submit\">submit</button>\r\n        <a href=\"/forget_password\" class=\"a\">back</a>\r\n      </form>\r\n      <form @submit.prevent=\"changePassword()\" v-if=\"user.step3\">\r\n        <h1>Atech acadmey</h1>\r\n        <div class=\"input\">\r\n          <label for=\"userEmail\">email:</label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"userEmail\"\r\n            id=\"userEmail\"\r\n            v-model=\"user.userEmail\"\r\n            placeholder=\"Enter email..\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"input\">\r\n          <label for=\"password\">new Password:</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"newPassword\"\r\n            id=\"newPassword\"\r\n            v-model=\"user.new_password\"\r\n            placeholder=\"Enter new Password...\"\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\">submit</button>\r\n      </form>\r\n      <footer><i class=\"fa-solid fa-copyright\"></i>Atechacadmey2022</footer>\r\n    </div>\r\n    <div class=\"response-div\">\r\n      <div class=\"done\" v-if=\"user.success\">\r\n        <i class=\"fa-solid fa-circle-check\"></i>\r\n        <span>{{ user.msg }}</span>\r\n      </div>\r\n      <div class=\"error\" v-if=\"user.failed\">\r\n        <i class=\"fa-solid fa-circle-exclamation\"></i>\r\n        <span>{{ user.msg }}</span>\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { reactive } from \"vue\";\r\nimport Header from \"./header.vue\";\r\nexport default {\r\n  name: \"Forget_password\",\r\n  components: {\r\n    Header,\r\n  },\r\n  setup() {\r\n    let user = reactive({\r\n      email: \"\",\r\n      token: \"\",\r\n      new_password: \"\",\r\n      userEmail: \"\",\r\n      count: 1,\r\n      msg: \"\",\r\n      step1: true,\r\n      step2: false,\r\n      step3: false,\r\n      success: false,\r\n      failed: false,\r\n    });\r\n\r\n    const router = useRouter();\r\n\r\n    let config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    function updatePassword() {\r\n      axios\r\n        .post(\"api/forget_password\", { email: user.email }, config)\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.statusText === \"OK\") {\r\n            localStorage.setItem(\"updateToken\", res.data.updateToken);\r\n            user.step1 = false;\r\n            user.step2 = true;\r\n            countdown();\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          user.failed = true;\r\n          setTimeout(post_error, 3000);\r\n        });\r\n    }\r\n\r\n    function verifyToken() {\r\n      axios\r\n        .post(\r\n          \"api/forget_password/token\",\r\n          { token: user.token, userToken: localStorage.getItem(\"updateToken\") },\r\n          config\r\n        )\r\n        .then((res) => {\r\n          if (res.statusText === \"OK\") {\r\n            user.step2 = false;\r\n            user.step3 = true;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          user.failed = true;\r\n          user.msg = err.response.data.msg;\r\n          setTimeout(post_error, 3000);\r\n        });\r\n    }\r\n\r\n    function changePassword() {\r\n      axios\r\n        .post(\r\n          \"api/forget_password/update\",\r\n          {\r\n            password: user.new_password,\r\n            email: user.userEmail,\r\n          },\r\n          config\r\n        )\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.statusText === \"OK\") {\r\n            user.success = true;\r\n            user.msg = res.data.msg;\r\n            setTimeout(pop, 3000);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          user.failed = true;\r\n          user.msg = err.response.data.msg;\r\n          setTimeout(post_error, 3000);\r\n        });\r\n    }\r\n\r\n    function countdown() {\r\n      let counting = setInterval(() => {\r\n        user.count += 1;\r\n\r\n        if (user.count === 60) {\r\n          clearInterval(counting);\r\n        }\r\n      }, 1000);\r\n    }\r\n\r\n    function pop() {\r\n      user.success = false;\r\n\r\n      router.push(\"/login\");\r\n    }\r\n\r\n    function post_error() {\r\n      user.failed = false;\r\n    }\r\n\r\n    return { user, updatePassword, verifyToken, changePassword };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$primaryColor: rgb(255, 255, 255);\r\n$SecondaryColor: rgba(230, 101, 129, 1);\r\n$tertiaryColor: rgba(65, 140, 228, 1);\r\n$footerColor: rgb(51, 2, 69);\r\n$baseColor: #072e54;\r\n$fallback: rgb(19, 37, 62);\r\n$col: #3d566f;\r\n\r\nmain {\r\n  background: rgb(249, 225, 198);\r\n  width: 100%;\r\n  padding: 0;\r\n\r\n  .header {\r\n    background: $fallback;\r\n    width: 100%;\r\n  }\r\n\r\n  .form {\r\n    width: 100%;\r\n    height: 83vh;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: relative;\r\n\r\n    form {\r\n      width: 500px;\r\n      height: fit-content;\r\n      padding: 20px;\r\n      border-radius: 7px;\r\n      background: white;\r\n      margin: auto;\r\n\r\n      span {\r\n        color: $SecondaryColor;\r\n      }\r\n\r\n      .input {\r\n        width: 100%;\r\n        margin: 20px auto;\r\n\r\n        label {\r\n          text-align: left;\r\n          display: block;\r\n          padding-bottom: 3px;\r\n          text-transform: capitalize;\r\n          font: 500 20px \"Poppins\", sans-serif;\r\n          color: $col;\r\n        }\r\n        input {\r\n          width: 100%;\r\n          height: 50px;\r\n          padding: 5px 20px;\r\n          outline: none;\r\n          border: none;\r\n          border-radius: 3px;\r\n          box-shadow: 0 0 2px 1px rgb(224, 223, 223);\r\n        }\r\n      }\r\n\r\n      button {\r\n        width: 100%;\r\n        height: 50px;\r\n        border: none;\r\n        margin: 20px auto;\r\n        border-radius: 3px;\r\n        background: $SecondaryColor;\r\n        color: white;\r\n      }\r\n\r\n      .a {\r\n        color: $col;\r\n      }\r\n    }\r\n\r\n    footer {\r\n      position: absolute;\r\n      bottom: 10px;\r\n      left: 40%;\r\n    }\r\n  }\r\n\r\n  .response-div {\r\n    width: 90%;\r\n    height: fit-content;\r\n    position: fixed;\r\n    left: 5%;\r\n    top: 5vh;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .done,\r\n  .error {\r\n    width: fit-content;\r\n    height: fit-content;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background: rgb(71, 243, 151);\r\n    border-radius: 4px;\r\n    padding: 20px;\r\n    z-index: 1;\r\n    position: relative;\r\n    animation: pop 1s linear alternate forwards;\r\n\r\n    i {\r\n      font-size: 30px;\r\n      margin-right: 10px;\r\n      color: white;\r\n    }\r\n\r\n    span {\r\n      color: white;\r\n      white-space: pre-wrap;\r\n    }\r\n  }\r\n\r\n  .error {\r\n    background: $SecondaryColor;\r\n    span {\r\n      color: white;\r\n    }\r\n  }\r\n\r\n  @keyframes pop {\r\n    from {\r\n      top: 0;\r\n    }\r\n    to {\r\n      top: 15vh;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./forget_password.vue?vue&type=template&id=614825d3&scoped=true\"\nimport script from \"./forget_password.vue?vue&type=script&lang=js\"\nexport * from \"./forget_password.vue?vue&type=script&lang=js\"\n\nimport \"./forget_password.vue?vue&type=style&index=0&id=614825d3&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\web-dev\\\\Academy\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-614825d3\"]])\n\nexport default __exports__"],"names":["class","for","type","href","user","updatePassword","name","id","placeholder","required","email","verifyToken","count","token","changePassword","userEmail","new_password","msg","components","Header","setup","step1","step2","step3","success","failed","router","config","headers","then","res","console","log","statusText","localStorage","setItem","data","updateToken","countdown","catch","err","setTimeout","post_error","userToken","getItem","response","password","pop","counting","setInterval","clearInterval","push","__exports__","render"],"sourceRoot":""}